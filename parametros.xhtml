<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:sec="http://www.springframework.org/security/tags"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">
<h:body>

	<ui:composition template="template/template.xhtml">
		<ui:define name="content">

			<p:ajaxStatus style="width:16px;height:16px;" id="ajaxStatusPanel">
				<f:facet name="start">
					<h:graphicImage value="/images/ajaxloadingbar.gif" />
				</f:facet>

				<f:facet name="complete">
					<h:outputText value="" />
				</f:facet>
			</p:ajaxStatus>

			<h:form id="formParametros">
				<p:messages id="messages" showDetail="true" redisplay="true" closable="true" />

				<p:fieldset legend="#{messages['parametros_sistema']}" style="padding:0.2em 1em;">

					<p:panelGrid columns="1" style="width: 50%;overflow:auto">

						<p:dataTable id="dtParametros" var="parametro" value="#{confSgaMB.confSgaList}" paginator="true" rows="15" lazy="false" editable="true" resizableColumns="true"
							paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}" rowsPerPageTemplate="5,10,15,20,25,50"
							rowKey="#{parametro.variable}">

							<p:ajax event="rowEdit" listener="#{confSgaMB.onRowEdit}" update=":formParametros:messages" />
							<p:ajax event="rowEditCancel" listener="#{confSgaMB.onRowCancel}" update=":formParametros:messages" />


							<p:column headerText="#{messages.variable}" sortBy="#{parametro.variable}" style="width:15%">
								<h:outputText value="#{parametro.variable}" />
							</p:column>

							<p:column headerText="#{messages.valor}" sortBy="#{parametro.valor}" style="text-align:right;width:15%">
								
								<p:cellEditor>
									<f:facet name="output">
										<h:outputText value="#{parametro.valor}" rendered="#{parametro.variable!='smtp_pass'}" />
										<h:outputText value="*************" rendered="#{parametro.variable=='smtp_pass'}" />
									</f:facet>
									<f:facet name="input">
										<p:password value="#{parametro.valor}" rendered="#{parametro.variable=='smtp_pass'}" />
										<p:inputText value="#{parametro.valor}" rendered="#{parametro.variable!='smtp_pass'}" />
									</f:facet>
								</p:cellEditor>
							</p:column>

							<p:column rendered="false" headerText="Editable" style="width:5%;text-align:center">
								<p:cellEditor>
									<f:facet name="output">
										<h:selectBooleanCheckbox value="#{parametro.editable}" disabled="true" />
									</f:facet>
									<f:facet name="input">
										<h:selectBooleanCheckbox value="#{parametro.editable}" label="Editable" />
									</f:facet>
								</p:cellEditor>
							</p:column>


							<sec:authorize access="hasAnyRole('ADMIN')">
								<p:column style="text-align:center; width:32px">
									<p:rowEditor editTitle="#{messages.editar}" saveTitle="#{messages.guardar_cambios}" cancelTitle="#{messages.cancelar_edicion}" rendered="#{parametro.editable}" />
								</p:column>


							</sec:authorize>

						</p:dataTable>
					</p:panelGrid>

				</p:fieldset>

			</h:form>




		</ui:define>
	</ui:composition>

</h:body>

</html>

