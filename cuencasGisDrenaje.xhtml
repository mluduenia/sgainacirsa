<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:sec="http://www.springframework.org/security/tags"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">
<h:body>

	<ui:composition template="template/template.xhtml">
		<ui:define name="content">

			<p:ajaxStatus style="width:16px;height:16px;" id="ajaxStatusPanel">
				<f:facet name="start">
					<h:graphicImage value="/images/ajaxloadingbar.gif" />
				</f:facet>

				<f:facet name="complete">
					<h:outputText value="" />
				</f:facet>
			</p:ajaxStatus>

			<h:form id="formDrenaje">
				<p:messages id="messages" showDetail="true" redisplay="true" closable="true" />

				<p:fieldset legend="#{messages['sensores_drenaje']}" style="padding:0.2em 1em;">

					<p:panelGrid columns="1" style="width: 50%;overflow:auto">

						<p:dataTable id="dtSensoresDrenaje" var="drenaje" value="#{cuencasGisDrenajeMB.cuencasGisDrenajeList}"
							paginator="true" rows="15" lazy="false" editable="true" 
							resizableColumns="true"
							paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
							rowsPerPageTemplate="5,10,15,20,25,50" rowKey="#{drenaje.gid}">

							<p:ajax event="rowEdit" listener="#{cuencasGisDrenajeMB.onRowEdit}" update=":formDrenaje:messages" />
							<p:ajax event="rowEditCancel" listener="#{cuencasGisDrenajeMB.onRowCancel}" update=":formDrenaje:messages" />


							<p:column headerText="#{messages.id}" sortBy="#{drenaje.gid}" style="width:10%">
								<h:outputText value="#{drenaje.gid}" />
							</p:column>

							<p:column headerText="#{messages.sensor_desde}" sortBy="#{drenaje.sensorDesde}" style="width:15%">
								<h:outputText value="#{drenaje.sensorDesde}" />
							</p:column>

							<p:column headerText="#{messages.sensor_hasta}" sortBy="#{drenaje.sensorHasta}" style="width:15%">
								<h:outputText value="#{drenaje.sensorHasta}" />
							</p:column>


							<p:column headerText="#{messages.sensor} (color)" sortBy="#{drenaje.sensor}" style="text-align:right;width:15%">
								<p:cellEditor>
									<f:facet name="output">
										<h:outputText value="#{drenaje.sensor}" />
									</f:facet>
									<f:facet name="input">
										<p:inputText value="#{drenaje.sensor}" />
									</f:facet>
								</p:cellEditor>
							</p:column>
							<sec:authorize access="hasAnyRole('ADMIN','SUPERVISOR')">
								<p:column style="text-align:center; width:32px">
									<p:rowEditor editTitle="#{messages.editar}" saveTitle="#{messages.guardar_cambios}"
										cancelTitle="#{messages.cancelar_edicion}" />
								</p:column>

								<p:column style="text-align:center" rendered="false">

									<p:commandButton id="cmdBorrarDrenaje" icon="ui-icon-trash" title="#{messages.borrar}"
										actionListener="#{cuencasGisDrenajeMB.deleteDrenaje(drenaje)}"
										update=":formDrenaje:messages,:formDrenaje:dtSensoresDrenaje">
										<p:confirm header="Confirmación" message="¿Desea borrar el registro con id #{drenaje.gid}?"
											icon="ui-icon-alert" />
									</p:commandButton>

								</p:column>
							</sec:authorize>
						</p:dataTable>
					</p:panelGrid>

				</p:fieldset>


				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
					<p:commandButton value="Sí" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
					<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
				</p:confirmDialog>

			</h:form>




		</ui:define>
	</ui:composition>

</h:body>

</html>

